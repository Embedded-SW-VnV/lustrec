
type choice = enum { one, two };
type entier = int;

const PI = 3;

node toto (x:int) returns (a:int;y:int)
var c : choice;b1, b2:entier;
let
  a = PI fby (a+1);
  c = if a=x then one else two ;
  b1 = 1 when one(c);
  b2 = 2 when two(c);
  y = merge c (one -> b1) (two -> b2);
tel

node test (x:bool) returns (y:int)
var a:int; b:int;
let
   (a,b) = toto(if x then 0 else 1);
   y = a ;
tel

